<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AGILE-IDM</title>
<link href="css/style.css" rel="stylesheet">
<script type="text/javascript"
	src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="javascript/util.js"></script>
<script>
  if(window.location.hash) {
      var hash = window.location.hash.substring(1); //Puts hash in variable, and removes the # character	
      if(hash.split('=')[0].trim() == 'token'){
	  token=hash.split('=')[1].trim();
	  //alert(token);
      }
      // hash found
  } else {
      // No hash found
  }
</script>
<script type="text/javascript">
	var token = 'hello world!';
	var user_id = '';

 	function handleKeyPress(e, form, global) {
		var key = e.keyCode || e.which;
		if (key == 13) {

			var currentIdmIp = encodeURIComponent(document
					.getElementById("idmIp").value);
			var currentIdmPort = encodeURIComponent(document
					.getElementById("idmPort").value);
			var currentUaaIp = encodeURIComponent(document
					.getElementById("uaaIp").value);
			var currentUaaPort = encodeURIComponent(document
					.getElementById("uaaPort").value);

			alert("changed");
		}
	}

	function setValue() {
		document.getElementById("idmIp").value = idmIp;
		document.getElementById("idmPort").value = idmPort;

	}

	function autoResize(id) {
		var newheight;

		if (document.getElementById) {
			newheight = document.getElementById(id).contentWindow.document.body.scrollHeight;
		}

		document.getElementById(id).height = (newheight) + "px";
	}
	//we do this first to make sure that we are authenticated... and then everything works ;-)
/*	alert('a');
	$.ajax({
	  url: idmIp+":"+idmPort+"/idm/serviceobject/api_token_data/so1meid2",
	  context: document.body
	}).done(function() {
	  alert('Authenticated successfully');
	});*/

</script>
</head>
<body onload="setValue()">

	<div id="container">
		<div id="header">
			<form method="get" action="">
				<table align="right" style="font-size: 13px">
					<tr>
						<td>Idm Ip:<input type="text" id="idmIp" name="idmIp"
							onkeypress="handleKeyPress(event,this.form)" /></td>
					</tr>
					<tr>
						<td>Idm Port:<input type="text" id="idmPort" name="idmPort"
							onkeypress="handleKeyPress(event,this.form)"></td>
					</tr>
					<tr>&nbsp;
					</tr>
					<tr>&nbsp;
					</tr>
				</table>
			</form>
		</div>

		<nav>
			<ul>
				<li id="navIdmLi"><a id="navIdmA" href="idm/authenticateUser.html"
					target="content">Idm</a>
					<ul>
						<li><a href="idm/authenticateUser.html" target="content">User</a>
							<ul>
								<li><a href="idm/authenticateUser.html" target="content">Authenticate</a></li>
								
							</ul></li>
					        <li><a href="idm/createSensor.html" target="content">Sensors</a>
							<ul>
								<li><a href="idm/createSensor.html" target="content">Create</a></li>
							</ul></li>

						


			</ul>
		</nav>

	</div>
	<div id="content" align="center">
		<iframe name="content" src="idm/authenticateUser.html" width="100%"
			height="400px" id="iframeContent" marginheight="0" frameborder="0"
			scrolling="no" onLoad="autoResize('iframeContent');"></iframe>
	</div>

</body>
</html>
