<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AGILE-IDM</title>
<link href="css/style.css" rel="stylesheet">
<script type="text/javascript"
	src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="javascript/util.js"></script>
<script type="text/javascript">
  function addListeners(){
		document.getElementById("loginLocal").style.visibility="hidden";
     var combo = document.getElementById("idp");
		 combo.addEventListener("change", function() {
    		if(combo.value == "pam_unix")
    		{
					  document.getElementById("loginLocal").style.visibility="visible";
    		}
				else{
					  document.getElementById("loginLocal").style.visibility="hidden";
						var provider = combo.options[combo.selectedIndex].value;
						if(provider == "github"){
							window.location = (github_url)
						}
						else if(provider == "google"){
							window.location = (google_url)
						}
						else if(provider == "web_id"){
							  console.log('webid');
                var port = webidPort;
                var str = window.location.href;
                var res = str.split("://");
                var parts = res[1].split(":");
                var host = parts[0];
                var paths = [];
                if(parts.length>1){
	                 paths = parts[1].split("/");
                }
                else{
	                 paths = parts[0].split("/");
	                 host = paths[0];
                }
                var url = "https://"+host+":"+port+web_id_url;
						 	  window.location = url;
						}
						else if(provider == "dropbox"){
							window.location = (dropbox_url)
						}
				}
		});
	}
</script>
</head>
<body onload="addListeners()">

	<div id="container">
		<div id="header">

		</div>


	</div>
	<div id="content" align="center">
		<h2 align="center" style="color: DarkBlue;">Authenticate User</h2>

			        
			<table align="center">
				<td>Authentication type:</td>
					<td>
					<select id="idp">
					<option value="">choose one</option>
					<option value="pam_unix">local authentication</option>
					 <option value="github">github</option>

					 <option value="google">google</option>
					 <option value="web_id">web_id</option>
					 <!--option value="dropbox">dropbox</option-->
					</select>
											</td>
				</tr>
				<tr>
					<td><br>&nbsp;</td>

				</tr>

			</table>
			    
			<form method="post" id="loginLocal" action="/auth/local">

				<table align="center">

					<tr>
						<td>User name:</td>
						<td><input type="text" id="username" name="username" value="admin"/>
															</td>
					</tr>

					<tr>
						<td>Password:</td>
						<td><input type="password" id="password" name="password" value="correcthorsebatterystaple"/>
															</td>
					</tr>

					<tr>
						<td><br>&nbsp;</td>
						<td><input type="submit" value="Submit"><!--a class="idmButton" onclick="authenticateUser()">Authent.</a-->
															</td>
					</tr>

				</table>

			</form>
		<div id="resultDivContainer" align="center"></div>
	</div>

</body>
</html>
